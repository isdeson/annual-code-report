# Git 年度报告生成器

扫描本地 Git 仓库，生成个人年度代码贡献报告。自动过滤指定作者的提交，支持多仓库递归扫描。

## 安装

```bash
npm install
```

## 使用

```bash
npm start
```

启动后会提示输入：
- Git 用户名/邮箱（自动从 git config 获取默认值）
- 仓库根目录路径
- 统计开始/结束日期

## 输出 JSON 字段说明

```jsonc
{
  // ==================== 报告元信息 ====================
  "generatedAt": "2025-01-15T10:30:00.000Z",    // 报告生成时间 (ISO 8601 格式)
  "range": {
    "since": "2025-01-01",                       // 统计开始日期
    "until": "2025-12-31"                        // 统计结束日期
  },
  "author": "zhangsan",                          // 被统计的 Git 作者（你输入的用户名/邮箱）

  // ==================== 汇总数据 ====================
  "summary": {

    // ---------- 基础统计 ----------
    "projectCount": 14,                          // 你参与的项目总数
    "totalCommits": 303,                         // 你的总提交次数
    "totalInsertions": 50000,                    // 你新增的代码总行数
    "totalDeletions": 10000,                     // 你删除的代码总行数
    "netLines": 40000,                           // 净增代码行数 = 新增 - 删除
    "totalFilesChanged": 500,                    // 你修改过的文件总数
    "activeDays": 100,                           // 你有提交记录的天数（活跃天数）
    "avgLinesPerCommit": 198.02,                 // 平均每次提交改动多少行代码
    "avgCommitInterval": 24.5,                   // 平均每隔多少小时提交一次

    // ---------- 时间边界 ----------
    "earliestCommit": {                          // 你在统计周期内的第一次提交
      "date": "2025-02-19T09:34:45+08:00",       //   - 提交时间
      "message": "feat: 初始化项目",              //   - 提交信息
      "project": "my-project"                    //   - 来自哪个项目
    },
    "latestCommit": {                            // 你在统计周期内的最后一次提交
      "date": "2025-12-31T18:00:00+08:00",
      "message": "fix: 修复bug",
      "project": "another-project"
    },
    "yearSpanDays": 315,                         // 从第一次提交到最后一次提交，跨越了多少天

    // ---------- 24小时提交分布 ----------
    "hourDistribution": [
      0,   // 0点 (00:00-00:59) 提交了 0 次
      0,   // 1点 提交了 0 次
      0,   // 2点
      0,   // 3点
      0,   // 4点
      0,   // 5点
      1,   // 6点 提交了 1 次
      5,   // 7点 提交了 5 次
      10,  // 8点
      20,  // 9点
      30,  // 10点
      25,  // 11点
      15,  // 12点
      20,  // 13点
      35,  // 14点
      32,  // 15点
      30,  // 16点
      25,  // 17点
      10,  // 18点
      15,  // 19点
      20,  // 20点
      25,  // 21点
      20,  // 22点
      5    // 23点 提交了 5 次
    ],

    // ---------- 星期提交分布 ----------
    "weekDistribution": [
      10,  // 周日提交了 10 次
      50,  // 周一提交了 50 次
      60,  // 周二提交了 60 次
      55,  // 周三提交了 55 次
      65,  // 周四提交了 65 次
      50,  // 周五提交了 50 次
      13   // 周六提交了 13 次
    ],

    // ---------- 月度提交趋势 ----------
    "monthlyTrend": [
      { "month": "2025-01", "count": 20 },       // 2025年1月提交了 20 次
      { "month": "2025-02", "count": 35 },       // 2025年2月提交了 35 次
      { "month": "2025-03", "count": 25 }        // ...以此类推
    ],

    // ---------- 季度提交对比 ----------
    "quarterlyComparison": {
      "Q1": 80,                                  // 第一季度 (1-3月) 提交了 80 次
      "Q2": 60,                                  // 第二季度 (4-6月) 提交了 60 次
      "Q3": 70,                                  // 第三季度 (7-9月) 提交了 70 次
      "Q4": 93                                   // 第四季度 (10-12月) 提交了 93 次
    },
    "mostProductiveQuarter": ["Q4", 93],         // 最高产的季度：Q4，提交了 93 次

    // ---------- 最高产记录 ----------
    "mostProductiveDay": {                       // 提交最多的一天
      "date": "2025-11-27",                      //   - 日期
      "commits": 26                              //   - 当天提交了 26 次
    },
    "mostProductiveWeek": {                      // 提交最多的一周
      "week": "48-2025",                         //   - 2025年第48周
      "commits": 59                              //   - 当周提交了 59 次
    },

    // ---------- 连续性统计 ----------
    "longestStreak": 15,                         // 最长连续提交天数（连续15天每天都有提交）
    "longestGap": 30,                            // 最长摸鱼天数（连续30天没有提交）
    "longestWorkSession": {                      // 单日最长工作时长（同一天内第一次和最后一次提交的时间差）
      "day": "2025-11-25",                       //   - 日期
      "minutes": 480,                            //   - 时长：480分钟
      "hours": 8.0,                              //   - 时长：8小时
      "project": "my-project"                    //   - 来自哪个项目
    },

    // ---------- 周末 vs 工作日 ----------
    "weekendVsWeekday": {
      "weekend": 23,                             // 周末（周六+周日）提交了 23 次
      "weekday": 280,                            // 工作日（周一到周五）提交了 280 次
      "weekendRate": 0.076                       // 周末提交占比 7.6%
    },

    // ---------- 作息时间统计 ----------
    "nightOwlRate": 0.15,                        // 夜猫子比例：15% 的提交发生在 22:00-06:00
    "earlyBirdCount": 15,                        // 早起提交次数：06:00-09:00 之间提交了 15 次
    "lateNightCount": 5,                         // 深夜提交次数：02:00-06:00 之间提交了 5 次

    // ---------- Commit 内容分析 ----------
    "shortestCommit": {                          // 字数最少的 commit
      "message": "fix",                          //   - 提交信息
      "length": 3,                               //   - 只有 3 个字符
      "project": "my-project"                    //   - 来自哪个项目
    },
    "longestCommit": {                           // 字数最多的 commit
      "message": "feat: 完成用户模块重构，包括登录、注册、权限管理等功能",
      "length": 120,
      "project": "another-project"
    },

    "topKeywords": [                             // 高频关键词 Top20（从 commit message 提取）
      { "word": "feat", "count": 150 },          //   - "feat" 出现了 150 次
      { "word": "fix", "count": 80 },            //   - "fix" 出现了 80 次
      { "word": "门店详情", "count": 48 }         //   - "门店详情" 出现了 48 次
    ],

    "emojiStats": [                              // 表情符号统计 Top10
      { "emoji": "🎉", "count": 10 },            //   - 🎉 出现了 10 次
      { "emoji": "🐛", "count": 5 }              //   - 🐛 出现了 5 次
    ],

    "emotionIndex": {                            // 情绪指数
      "exclamation": 20,                         //   - commit message 中感叹号 ! 总数
      "question": 5                              //   - commit message 中问号 ? 总数
    },

    "commitTypeDistribution": {                  // Commit 类型分布（Conventional Commits 规范）
      "feat": 150,                               //   - 新功能 150 次
      "fix": 80,                                 //   - Bug修复 80 次
      "chore": 30,                               //   - 杂项/构建 30 次
      "docs": 10,                                //   - 文档 10 次
      "style": 5,                                //   - 代码格式 5 次
      "refactor": 20                             //   - 重构 20 次
    },

    // ---------- 文件统计 ----------
    "topFileTypes": [                            // 最常修改的文件类型 Top10
      { "ext": ".tsx", "count": 200 },           //   - .tsx 文件修改了 200 次
      { "ext": ".ts", "count": 150 },            //   - .ts 文件修改了 150 次
      { "ext": ".scss", "count": 100 }
    ],

    "topChangedFiles": [                         // 最常修改的文件 Top10
      { "file": "src/index.tsx", "count": 50 },  //   - src/index.tsx 修改了 50 次
      { "file": "package.json", "count": 30 }
    ],

    "fileChanges": {                             // 文件增删统计
      "added": 100,                              //   - 新增了 100 个文件
      "deleted": 20,                             //   - 删除了 20 个文件
      "net": 80                                  //   - 净增 80 个文件
    },

    // ---------- 协作统计 ----------
    "topCollaborators": [                        // 协作者 Top10（和你在同一仓库提交的其他人）
      {
        "name": "lisi <lisi@example.com>",       //   - 协作者姓名和邮箱
        "commits": 200                           //   - 他在这些仓库里提交了 200 次
      },
      {
        "name": "wangwu <wangwu@example.com>",
        "commits": 150
      }
    ],

    "mergeCommits": 31,                          // 合并提交次数（message 以 "Merge" 开头）
    "revertCommits": 2,                          // 回滚提交次数（message 以 "Revert" 开头）
    "hotfixCount": 5,                            // 热修复次数（message 包含 "hotfix" 或 "bugfix"）
    "hotfixRate": 0.016,                         // 热修复占比 1.6%
    "bigRefactorCount": 10,                      // 大型重构次数（单次提交改动超过 500 行）
    "branchCount": 50,                           // 所有项目的分支总数

    // ---------- 项目统计 ----------
    "topProjects": [                             // Top5 项目排行（按提交次数）
      {
        "name": "my-project",                    //   - 项目名称
        "commits": 100,                          //   - 在该项目提交了 100 次
        "insertions": 20000,                     //   - 在该项目新增了 20000 行
        "deletions": 5000,                       //   - 在该项目删除了 5000 行
        "badges": ["🔥 稳定输出", "🔨 重构大师"]   //   - 该项目获得的徽章
      }
    ],

    "allProjects": [                             // 你参与的所有项目名称列表
      "my-project",
      "another-project",
      "third-project"
    ],

    // ---------- 年度徽章 ----------
    "badges": [                                  // 你获得的所有徽章
      "🌅 早起鸟",                               //   - 早起提交占比 > 10%
      "🦉 夜猫子",                               //   - 夜间提交占比 > 20%
      "💪 周末战士",                             //   - 周末提交占比 > 15%
      "🔥 稳定输出",                             //   - 连续提交 >= 7 天
      "🏖️ 摸鱼王",                              //   - 连续不提交 >= 14 天
      "🌙 深夜肝帝",                             //   - 深夜提交 > 10 次
      "🔨 重构大师",                             //   - 大型重构 >= 10 次
      "🤝 协作达人",                             //   - 合并提交 > 50 次
      "🚀 多项目达人",                           //   - 参与项目 >= 10 个
      "💎 千次提交",                             //   - 总提交 >= 1000 次
      "📝 十万行代码"                            //   - 新增代码 >= 10万行
    ],

    // ---------- 年度称号（唯一） ----------
    "annualTitle": {                             // 根据你最突出的特征生成的唯一称号
      "title": "📝 产出之王",                    //   - 称号名称
      "desc": "代码产出极高"                     //   - 称号描述
    }
    // 可能的称号：
    // 💎 代码狂人 - 提交次数惊人
    // 📝 产出之王 - 代码产出极高
    // 🦉 暗夜行者 - 深夜是你的主场
    // 🌅 晨光先锋 - 早起的鸟儿有代码写
    // 💪 周末战神 - 周末也在燃烧
    // 🔥 持之以恒 - 连续提交天数超长
    // 🔨 重构之神 - 大刀阔斧改代码
    // 🚀 全栈游侠 - 多项目同时推进
    // 🤝 团队枢纽 - 协作合并最频繁
    // 🏖️ 佛系开发 - 张弛有度，懂得休息
    // 🌙 深夜肝帝 - 凌晨还在写代码
  }
}
```

## License

MIT
